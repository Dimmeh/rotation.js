/*! rotation.js - v0.3.0 - 2013-12-30 */!function(a,b,c){"use strict";var d={namespace:"rotation",autoRotate:!0,interval:3e3,duration:300,transitionIn:"fadeIn",transitionOut:"fadeOut",pauseOnHover:!0,stopOnHover:!1,scrolling:!0,keypress:!0,touch:!0,touchDelay:500,touchMin:30,touchMax:320,itemsId:"rotation",visibleItems:1,scrollingStep:1,pauseControl:!0,pauseControlContainer:"rotation-play-pause",navControls:!0,navControlsClass:"rotation-nav-controls",navControlsItemClass:"item",navControlsNextClass:"next",navControlsPrevClass:"prev",navControlsNextText:">>",navControlsPrevText:"<<",pagination:!0,paginationNumbers:!0,paginationClass:"rotation-pagination",paginationItemClass:"item",paginationCurrentItemClass:"current",beforeInit:function(){},afterInit:function(){},beforeTransition:function(){},afterTransition:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeUp:function(){},onSwipeDown:function(){},onSwipe:function(){}},e=function(b,e){var f=this;return this.options=a.extend({},d,e),this.container=b,this.currentIndex=0,this.itemsContainer=a("#"+this.getOption("itemsId"),this.container),this.items=a(this.itemsContainer).children(),this.touchSupported="ontouchend"in c,this.options.beforeInit.call(this),this.init(),this.options.afterInit.call(this),{play:function(){f.play()},pause:function(){f.pause()}}};e.VERSION="0.4.0",a.extend(e.prototype,{getOption:function(a){return this.options[a]},setOption:function(a,b){return this.options[a]=b,b},triggerCustomEvent:function(a,b){a.trigger(b)},itemsCount:function(){return this.items.length},getItemByIndex:function(a){return this.items.eq(a)},init:function(){this.itemWidth=this.itemsContainer.width(),this.initIdsOnElements(),this.items.eq(0).siblings().hide(),this.bindEvents(),this.build(),this.play()},initIdsOnElements:function(){var a;for(a=0;a<this.itemsCount();a++)this.getItemByIndex(a).attr("id","rotation-item-"+a)},bindEvents:function(){this.bindResizeEvent(),this.getOption("pauseOnHover")&&this.bindMouseEvents(),this.getOption("scrolling")&&this.bindScrolling(),this.getOption("keypress")&&this.bindKeyboardEvents(),this.getOption("touch")&&this.bindTouchEvents()},bindResizeEvent:function(){var c=this;a(b).on("resize",function(){c.init(),c.rotate(0)})},bindKeyboardEvents:function(){var b=this;a(c).on("keydown",function(a){39===a.keyCode&&b.rotate(1),37===a.keyCode&&b.rotate(-1)})},bindMouseEvents:function(){var a=this;this.itemsContainer.on("mouseenter",function(){a.setOption("autoRotate",!1)}).on("mouseleave",function(){a.setOption("autoRotate",!0)})},bindScrolling:function(){var a=this;this.itemsContainer.on("mousewheel",function(b){b.preventDefault(),a.rotate(a.currentIndex+1)})},bindTouchEvents:function(){var b,c,d,e,f,g,h=this,i=h.getOption("touchDelay"),j=h.getOption("touchMin"),k=h.getOption("touchMax"),l=h.touchSupported?"touchstart":"mousedown",m=h.touchSupported?"touchend":"mouseout",n=h.touchSupported?"touchmove":"mousemove",o=function(a){return a.pageX?a:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]},p=function(b){var c=o(b);return{time:(new Date).getTime(),touch:c,coords:[c.pageX,c.pageY],origin:a(b.target)}},q=function(a){a.preventDefault(),c=p(a)},r=function(a){c&&(d=p(a),Math.abs(c.coords[0]-d.coords[0])>10&&a.preventDefault())},s=function(l){if(l.preventDefault(),c&&d){if(b=d.time-c.time,f=Math.abs(c.coords[0]-d.coords[0]),g=Math.abs(c.coords[1]-d.coords[1]),e=Math.sqrt(f*f+g*g),15>e&&100>b)return c.origin.trigger("click"),void 0;if(i>b&&e>=j&&k>=e){var m=["swipe"];f>=j&&j>g?c.coords[0]>d.coords[0]?(m.push("swipeleft"),h.rotate(-1)):(m.push("swiperight"),h.rotate(1)):g>=j&&j>f&&(c.coords[1]<d.coords[1]?m.push("swipedown"):m.push("swipeup")),a.each(m,function(b,e){var f=a.Event(e,{target:l.target,swipestart:c,swipeend:d});h.triggerCustomEvent(h.itemsContainer,f)})}}};h.itemsContainer.on(l,q).on(n,r).on(m,s)},rotate:function(b,c){if(!(this.itemsCount()<=1)&&this.getOption("autoRotate")){b&&this.pause(),this.getOption("beforeTransition").call(this);var d,e,f=this.currentIndex,g=this.itemsCount(),h=this.getItemByIndex(f),i=this.getOption("duration"),j=this;f=0===f&&0>b?g-1:(b?f+b:++f)%g,d=this.getItemByIndex(f),e=b?b*j.itemWidth:j.itemWidth,j.itemsContainer.stop(),a.when(a(h).css({"margin-left":"0px",opacity:1}).animate({"margin-left":0>e?e:-e+"px",opacity:0},{duration:i,complete:function(){a(d).css({zIndex:10,opacity:0,"margin-left":0>e?-e:e+"px"}).show().animate({"margin-left":"0px",opacity:1},{duration:i})}})).done(function(){j.currentIndex=f}),this.getOption("pagination")&&this.setPaginationCurrentItem(b),this.getOption("afterTransition").call(this),c&&"function"==typeof c&&c(),b&&this.play()}},play:function(){var b=this;this.getOption("autoRotate")&&(this.auto=setInterval(function(){b.rotate()},this.getOption("interval")),b.triggerCustomEvent(b.itemsContainer,a.Event("play")))},pause:function(){var b=this;b.auto&&(b.auto=clearInterval(b.auto),b.triggerCustomEvent(b.itemsContainer,a.Event("pause")))},setPaginationCurrentItem:function(b){var c,d,e,f,g=this.getOption("paginationCurrentItemClass"),h=a("."+this.getOption("paginationClass"),this.container),i=a("a."+g,h).parent("li");f=0>b?"last":"first",c=b?0>b?this.currentIndex+b:this.currentIndex+b-1:this.currentIndex,d=i.siblings().eq(c),e=d.length?d.find("a"):a("a:"+f,h),a("a."+g,h).removeClass(g),e.addClass(g)},build:function(){this.getOption("navControls")&&this.buildNavControls(),this.getOption("pagination")&&this.buildPagination()},buildNavControls:function(){if(!(this.itemsCount()<=1)){var b,c,d=this,e=this.container;b=a("<div/>",{"class":this.getOption("navControlsClass")}),b.appendTo(e),c=a("<a/>",{href:"#","class":this.getOption("navControlsItemClass")+" "+this.getOption("navControlsPrevClass"),"data-direction":-1,html:this.getOption("navControlsPrevText")}),c.appendTo(b),c=a("<a/>",{href:"#","class":this.getOption("navControlsItemClass")+" "+this.getOption("navControlsNextClass"),"data-direction":1,html:this.getOption("navControlsNextText")}),c.appendTo(b),b.children().on("click",function(b){b.preventDefault();var c=+a(this).data("direction");d.rotate(c)})}},buildPagination:function(){if(!(this.itemsCount()<=1)){var b,c,d,e,f,g=this,h=this.container;for(b=a("<ul/>",{"class":this.getOption("paginationClass")}),b.appendTo(h),e=0;e<this.itemsCount();e++)c=a("<li/>"),d=a("<a/>",{href:"#rotation-item-"+e,"data-index":e,text:this.getOption("paginationNumbers")?e+1:"","class":this.getOption("paginationItemClass")}),d.appendTo(c),c.appendTo(b);f=a("li",b).children(),f.eq(0).addClass(this.getOption("paginationCurrentItemClass")),f.on("click touchstart",function(b){b.preventDefault();var c,d,e=a(this),f=g.getOption("paginationCurrentItemClass"),h=+e.data("index");d=+e.parent("li").siblings("li").find("a."+f).data("index"),c=h-d,g.rotate(c)})}}}),a.fn.rotation=function(b){return this.each(function(){var c=a(this);new e(c,b)})}}(jQuery,window,document);