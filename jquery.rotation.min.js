/*! rotation.js - v0.3.0 - 2013-12-26 */!function(a,b,c){"use strict";var d={namespace:"rotation",autoRotate:!0,interval:4e3,duration:500,transitionIn:"fadeIn",transitionOut:"fadeOut",pauseOnHover:!0,stopOnHover:!1,scrolling:!0,keypress:!0,itemsId:"rotation",itemsElement:"li",visibleItems:1,scrollingStep:1,pauseControl:!0,pauseControlContainer:"rotation-play-pause",navControls:!0,navControlsClass:"rotation-nav-controls",navControlsItemClass:"item",navControlsNextClass:"next",navControlsPrevClass:"prev",navControlsNextText:">>",navControlsPrevText:"<<",pagination:!0,paginationNumbers:!0,paginationClass:"rotation-pagination",paginationItemClass:"item",paginationCurrentItemClass:"current",beforeInit:function(){},afterInit:function(){},beforeTransition:function(){},afterTransition:function(){}},e=function(b,c){var e=this;return this.options=a.extend({},d,c),this.container=b,this.currentIndex=0,this.itemsContainer=a("#"+this.getOption("itemsId"),this.container),this.items=a(this.getOption("itemsElement"),this.itemsContainer),this.itemWidth=this.itemsContainer.width(),this.options.beforeInit.call(this),this.init(),this.options.afterInit.call(this),{play:function(){e.play()},pause:function(){e.pause()}}};e.VERSION="0.3.0",a.extend(e.prototype,{getOption:function(a){return this.options[a]},setOption:function(a,b){return this.options[a]=b,b},itemsCount:function(){return this.items.length},getItemByIndex:function(a){return this.items.eq(a)},init:function(){var b=this.getOption("itemsElement");this.initIdsOnElements(),a(b+":first",this.container).siblings(b).hide(),this.bindEvents(),this.build(),this.play()},initIdsOnElements:function(){var a;for(a=0;a<this.itemsCount();a++)this.getItemByIndex(a).attr("id","rotation-item-"+a)},bindEvents:function(){var d=this;a(b).on("resize",function(){}),this.getOption("pauseOnHover")&&d.bindMouseEvents(),this.getOption("scrolling")&&d.bindScrolling(),this.getOption("keypress")&&a(c).on("keydown",function(a){39===a.keyCode&&(d.setOption("autoRotate",!0),d.rotate(1)),37===a.keyCode&&(d.setOption("autoRotate",!0),d.rotate(-1))})},bindMouseEvents:function(){var b=this;a(b.container).bind("mouseenter",function(){b.setOption("autoRotate",!1)}).bind("mouseleave",function(){b.setOption("autoRotate",!0)})},bindScrolling:function(){var b=this;a(this.container).bind("mousewheel",function(a){a.preventDefault(),b.rotate(b.currentIndex+1)})},rotate:function(b,c){if(!(this.itemsCount()<=1)&&this.getOption("autoRotate")){b&&this.pause(),this.getOption("beforeTransition").call(this);var d,e,f=this.currentIndex,g=this.itemsCount(),h=this.getItemByIndex(f),i=this.getOption("duration"),j=this;f=0===f&&0>b?g-1:(b?f+b:++f)%g,d=this.getItemByIndex(f),e=b?b*j.itemWidth:j.itemWidth,j.itemsContainer.stop(),a.when(a(h).css({"margin-left":"0px",opacity:1}).animate({"margin-left":0>e?e:-e+"px",opacity:0},{duration:i,complete:function(){a(d).css({zIndex:10,opacity:0,"margin-left":0>e?-e:e+"px"}).show().animate({"margin-left":"0px",opacity:1},{duration:i})}})).done(function(){j.currentIndex=f}),this.getOption("pagination")&&this.setPaginationCurrentItem(b),this.getOption("afterTransition").call(this),c&&"function"==typeof c&&c(),b&&this.play()}},play:function(){var a=this;this.getOption("autoRotate")&&(this.auto=setInterval(function(){a.rotate()},this.getOption("interval")))},pause:function(){var a=this;a.auto&&(a.auto=clearInterval(a.auto))},setPaginationCurrentItem:function(b){var c,d,e,f,g=this.getOption("paginationCurrentItemClass"),h=a("."+this.getOption("paginationClass"),this.container),i=a("a."+g,h).parent("li");f=0>b?"last":"first",c=b?0>b?this.currentIndex+b:this.currentIndex+b-1:this.currentIndex,d=i.siblings().eq(c),e=d.length?d.find("a"):a("a:"+f,h),a("a."+g,h).removeClass(g),e.addClass(g)},build:function(){this.getOption("navControls")&&this.buildNavControls(),this.getOption("pagination")&&this.buildPagination()},buildNavControls:function(){if(!(this.itemsCount()<=1)){var b,c,d=this,e=this.container;b=a("<div/>",{"class":this.getOption("navControlsClass")}),b.appendTo(e),c=a("<a/>",{href:"#","class":this.getOption("navControlsItemClass")+" "+this.getOption("navControlsPrevClass"),"data-direction":-1,html:this.getOption("navControlsPrevText")}),c.appendTo(b),c=a("<a/>",{href:"#","class":this.getOption("navControlsItemClass")+" "+this.getOption("navControlsNextClass"),"data-direction":1,html:this.getOption("navControlsNextText")}),c.appendTo(b),b.children().on("click",function(b){b.preventDefault();var c=+a(this).data("direction");d.setOption("autoRotate",!0),d.rotate(c)})}},buildPagination:function(){if(!(this.itemsCount()<=1)){var b,c,d,e,f,g=this,h=this.container;for(b=a("<ul/>",{"class":this.getOption("paginationClass")}),b.appendTo(h),e=0;e<this.itemsCount();e++)c=a("<li/>"),d=a("<a/>",{href:"#rotation-item-"+e,"data-index":e,text:this.getOption("paginationNumbers")?e+1:"","class":this.getOption("paginationItemClass")}),d.appendTo(c),c.appendTo(b);f=a("li",b).children(),f.eq(0).addClass(this.getOption("paginationCurrentItemClass")),f.on("click touchstart",function(b){b.preventDefault();var c,d,e=a(this),f=g.getOption("paginationCurrentItemClass"),h=+e.data("index");d=+e.parent("li").siblings("li").find("a."+f).data("index"),c=h-d,g.setOption("autoRotate",!0),g.rotate(c)})}}}),a.fn.rotate=function(b){return this.each(function(){var c=a(this);new e(c,b)})}}(jQuery,window,document);